<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mentaliza - Chat IA Avan√ßado</title>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@700&family=Open+Sans&display=swap" rel="stylesheet">

  <style>
    body { font-family: 'Open Sans', sans-serif; margin:0; padding:0; background:#F0F8FF; color:#333; }
    header { background: linear-gradient(90deg,#A7C7E7,#A8E6CF); color:white; padding:25px; text-align:center; }
    header h1 { font-family:'Merriweather', serif; font-size:2.8em; margin:0; }
    nav a { color:white; margin:0 15px; text-decoration:none; font-weight:bold; }
    nav a:hover { text-decoration:underline; }
    section { padding:40px 20px; margin:20px auto; border-radius:15px; max-width:900px; box-shadow:0 4px 8px rgba(0,0,0,0.1); background:#FFFFFF; }
    h2 { font-family:'Merriweather', serif; font-size:2em; margin-bottom:20px; }
    #chatIAlog { height:250px; overflow-y:auto; padding:10px; border:1px solid #ccc; border-radius:8px; background:#f7f7f7; margin-bottom:10px; }
    input { padding:10px; border-radius:8px; border:1px solid #ccc; width:70%; margin-right:10px; }
    button { padding:10px 16px; border:none; border-radius:8px; background-color:#4CAF50; color:white; cursor:pointer; font-weight:bold; transition:0.2s; }
    button:hover { background-color:#45a049; transform:scale(1.05); }
    .cards { display:flex; flex-wrap:wrap; gap:20px; justify-content:center; }
    .card { flex:1 1 220px; background:linear-gradient(135deg,#A8E6CF,#E1BEE7); padding:15px; border-radius:12px; text-align:center; box-shadow:0 4px 6px rgba(0,0,0,0.1); font-weight:bold; transition:0.3s; cursor:pointer; }
    .card:hover { transform:translateY(-5px); }
    iframe { width:100%; height:280px; border-radius:10px; margin-top:10px; }
    .alert { background:#FFEB3B; padding:15px; border-radius:8px; margin-top:20px; font-weight:bold; text-align:center; }
    footer { background:#A7C7E7; color:white; text-align:center; padding:15px; margin-top:40px; }
    .typing { font-style: italic; color: #777; margin-bottom:6px; }
    .fadeIn { animation: fadeIn 0.5s ease forwards; opacity:0; }
    @keyframes fadeIn { to { opacity:1; } }
    @media(max-width:768px){.cards{flex-direction:column;align-items:center;} input{width:100%;margin-bottom:10px;}}
  </style>
</head>
<body>

<header>
  <h1>Mentaliza üíö</h1>
  <nav>
    <a href="#chatIA">Chat IA</a>
    <a href="#tecnicas">T√©cnicas</a>
    <a href="#videos">V√≠deos</a>
  </nav>
</header>

<section class="hero">
  <h2>Bem-vindo ao Mentaliza</h2>
  <p>Converse com nosso chatbot IA avan√ßado, veja t√©cnicas r√°pidas e v√≠deos educativos.</p>
  <a href="#chatIA"><button>Come√ßar Chat IA</button></a>
</section>

<section id="chatIA">
  <h2>ü§ñ Chat IA</h2>
  <div id="chatIAlog"></div>
  <input id="chatIAinput" placeholder="Escreva aqui...">
  <button onclick="sendIA()">Enviar</button>
  <div style="margin-top:10px;">
    <button onclick="quickQuestion('Estou estressado')">Estou estressado</button>
    <button onclick="quickQuestion('Quero melhorar meu foco')">Melhorar foco</button>
    <button onclick="quickQuestion('Preciso dormir melhor')">Sono melhor</button>
    <button onclick="quickQuestion('Preciso de ajuda agora')">Ajuda imediata</button>
  </div>
</section>

<section id="tecnicas">
  <h2>‚ö° T√©cnicas R√°pidas</h2>
  <div class="cards">
    <div class="card" onclick="alert('Respire contando: inspire 4s, segure 7s, expire 8s.')">Respira√ß√£o 4-7-8</div>
    <div class="card" onclick="alert('Alongue bra√ßos, pesco√ßo e costas por 5 minutos.')">Alongamento de 5 min</div>
    <div class="card" onclick="alert('Fa√ßa pausa de 1-2 minutos, respire e relaxe.')">Pausa consciente</div>
    <div class="card" onclick="alert('Anote pensamentos e sentimentos rapidamente.')">Anota√ß√£o de pensamentos</div>
    <div class="card" onclick="alert('Fa√ßa mini medita√ß√£o guiada de 3 minutos.')">Mini medita√ß√£o guiada</div>
  </div>
</section>

<section id="videos">
  <h2>üé• V√≠deos Recomendados</h2>
  <div class="cards">
    <div class="card">
      <h3>Medita√ß√£o Guiada Iniciantes</h3>
      <iframe src="https://www.youtube.com/embed/1ZYbU82GVz4" allowfullscreen></iframe>
    </div>
    <div class="card">
      <h3>Respira√ß√£o para Redu√ß√£o de Estresse</h3>
      <iframe src="https://www.youtube.com/embed/SEfs5TJZ2J4" allowfullscreen></iframe>
    </div>
    <div class="card">
      <h3>Como Lidar com a Ansiedade</h3>
      <iframe src="https://www.youtube.com/embed/0V9tQ8J7eYg" allowfullscreen></iframe>
    </div>
  </div>
</section>

<section class="alert">
  Este site oferece informa√ß√µes para apoio emocional. N√£o substitui acompanhamento profissional. Em caso de crise, ligue 188 (CVV - Brasil).
</section>

<footer>
  <p>&copy; 2025 Mentaliza - Todos os direitos reservados</p>
</footer>

<script type="module">
import { pipeline } from 'https://cdn.jsdelivr.net/npm/@xenova/transformers/dist/transformers.min.js';

let generator;
let modelLoaded = false;
let chatHistory = []; // √∫ltimas 5 mensagens

async function loadModel(){
  generator = await pipeline('text-generation', 'Xenova/gpt2', { quantized:true });
  modelLoaded = true;
  appendIA('Sistema','Ol√°! Eu sou o MentalizaBot IA. Posso oferecer dicas educativas e acolhedoras sobre bem-estar. Em risco, ligue 188.');
}
loadModel();

function appendIA(sender, text, typing=false){
  const log = document.getElementById('chatIAlog');
  const msg = document.createElement('div');
  msg.className = 'fadeIn';
  msg.style.padding='6px';
  msg.style.marginBottom='6px';
  msg.style.borderRadius='6px';
  msg.style.background = sender==='Voc√™' ? '#e0f7fa' : '#fff';
  msg.innerHTML = `<strong>${sender}:</strong> ${text}`;
  log.appendChild(msg);
  log.scrollTop = log.scrollHeight;
}

async function sendIA(){
  if(!modelLoaded){ alert('O chat ainda est√° carregando, aguarde...'); return; }
  const input = document.getElementById('chatIAinput');
  const text = input.value.trim();
  if(!text) return;
  appendIA('Voc√™', text);
  chatHistory.push(`Usu√°rio: ${text}`);
  if(chatHistory.length>5) chatHistory.shift();
  input.value='';
  
  appendIA('MentalizaBot','digitando...',true);

  const prompt = `Voc√™ √© um assistente acolhedor e educativo, nunca faz diagn√≥stico. Sempre redireciona para ajuda em crise.\n${chatHistory.join('\n')}\nMentalizaBot:`;

  const output = await generator(prompt, { max_length:80 });
  document.getElementById('chatIAlog').lastChild.remove(); // remove "digitando..."
  const answer = output[0].generated_text.replace(prompt,'').trim();
  appendIA('MentalizaBot',answer);
  chatHistory.push(`MentalizaBot: ${answer}`);
  if(chatHistory.length>5) chatHistory.shift();
}

function quickQuestion(text){
  document.getElementById('chatIAinput').value=text;
  sendIA();
}
</script>

</body>
</html>


